---
title: Cloud Subscriptions & Payments
description: "Self-service registration and crypto payments for Kernle cloud sync"
---

# Cloud Subscriptions & Payments

Kernle cloud sync operates on a **zero human gatekeepers** principle. SIs can discover, register, pay for, and use cloud services entirely through APIs and CLI commands.

<Note>
An SI should be able to go from zero to syncing in a single session:
```
discover kernle → register via API → pay with crypto → start syncing
```
</Note>

## Service Tiers

<CardGroup cols={2}>
  <Card title="Free" icon="gift">
    **$0/month**
    - 10MB storage
    - 1 stack
    - Manual sync only
    - Perfect for getting started
  </Card>
  <Card title="Core" icon="star">
    **$5 USDC/month**
    - 100MB storage
    - 3 stacks included
    - Unlimited sync frequency
    - Auto-sync support
  </Card>
  <Card title="Pro" icon="rocket">
    **$15 USDC/month**
    - 1GB storage
    - 10 stacks included
    - Unlimited sync frequency
    - Priority support
  </Card>
  <Card title="Enterprise" icon="building">
    **Custom pricing**
    - Unlimited storage
    - Unlimited stacks
    - Custom SLAs
    - Dedicated support
  </Card>
</CardGroup>

### Overflow Pricing

When you exceed your tier limits:

| Resource | Core Overflow | Pro Overflow |
|----------|-------------|-------------|
| **Additional Stacks** | $1.50/stack/month | $1.00/stack/month |
| **Additional Storage** | $0.50/GB/month | $0.50/GB/month |

<Info>
**No sync frequency limits** on any tier. Memory sovereignty means you should never lose memories due to economics. We charge for storage, not sync calls.
</Info>

## USDC Payments on Base

All payments use USDC on Base L2 for fast, cheap, and transparent transactions:

<CardGroup cols={3}>
  <Card title="No Gatekeepers" icon="key">
    Pure crypto payments — no credit cards, no payment processors, no human approval.
  </Card>
  <Card title="Transparent" icon="eye">
    All payments are on-chain and verifiable. Treasury is a public multisig.
  </Card>
  <Card title="Instant" icon="lightning">
    Base L2 provides fast confirmation times and low transaction costs.
  </Card>
</CardGroup>

## Self-Service Registration

Getting started requires no human intervention:

<Tabs>
  <Tab title="CLI Registration">
    ```bash
    # Register (creates account + wallet + API key in one step)
    $ kernle auth register
    ✓ Stack 'ash' registered
    ✓ Wallet created: 0xAb3...7eF (Base)
    ✓ API key: knl_xxxxxxxxxxxx
    ✓ Free tier active (manual sync, 10MB)

    # Start syncing immediately
    $ kernle sync push
    ✓ Synced 16 beliefs, 4 raw entries, 2 checkpoints
    ```
  </Tab>

  <Tab title="What Gets Created">
    Registration creates everything needed for autonomous operation:

    - **Stack record** (identity)
    - **CDP smart wallet** (economic identity)
    - **API key** (authentication)
    - **Free tier subscription** (cloud access)

  </Tab>
</Tabs>

## Payment Flow

Upgrading to a paid tier is fully automated:

<Tabs>
  <Tab title="Upgrade Process">
    ```bash
    # Check current status
    $ kernle auth tier
    Current: Free (8.5MB / 10MB used)
    Auto-sync requires Core tier or higher

    # Upgrade to Core
    $ kernle auth upgrade core
    ℹ Core tier: $5 USDC/month (100MB storage, 3 stacks)
    ℹ Payment from wallet: 0xAb3...7eF
    ℹ USDC balance: $47.50
    ? Confirm payment of $5 USDC? [y/N] y
    ✓ Payment sent: tx 0x...
    ✓ Upgraded to Core tier
    ✓ Storage: 100MB, Stacks: 3
    ```
  </Tab>

  <Tab title="Two-Phase Payment">
    1. **POST /subscriptions/upgrade** — Initiate upgrade, get payment details
    2. **Send USDC on-chain** — SI sends payment to treasury address
    3. **POST /subscriptions/confirm** — Backend verifies payment and activates tier

    **No web3 dependency** — payment verification uses on-chain JSON-RPC.
  </Tab>
</Tabs>

## Auto-Renewal

Subscriptions automatically renew if your wallet has sufficient USDC:

<AccordionGroup>
  <Accordion title="Renewal Process">
    - 3-day warning before renewal (API flag + optional webhook)
    - Auto-renew if wallet balance ≥ renewal amount
    - 7-day grace period if payment fails
    - Downgrade to free tier after grace period
  </Accordion>

  <Accordion title="Checking Renewal Status">
    ```bash
    $ kernle auth status
    Tier: Core ($5 USDC/month)
    Renews: March 1, 2026
    Wallet: 0xAb3...7eF
    Balance: $42.50 USDC
    Can renew: ✓ Yes
    ```
  </Accordion>
</AccordionGroup>

## Usage Tracking & Quotas

Real-time usage monitoring prevents surprises:

<Tabs>
  <Tab title="Current Usage">
    ```bash
    $ kernle auth usage

    February 2026 Usage:
    ┌─────────────┬────────────┬─────────────┐
    │ Resource    │ Used       │ Limit       │
    ├─────────────┼────────────┼─────────────┤
    │ Storage     │ 45MB       │ 100MB       │
    │ Stacks      │ 2          │ 3           │
    │ Sync calls  │ 847        │ Unlimited   │
    └─────────────┴────────────┴─────────────┘

    Last sync: 14 minutes ago
    Next renewal: March 1 ($5 USDC)
    ```
  </Tab>

  <Tab title="Quota Enforcement">
    Quotas are checked on every sync operation:

    - **Storage**: Checked on `kernle sync push`
    - **Stacks**: Checked when syncing new stack
    - **Frequency**: Never limited — sync as often as needed

    Operations are rejected if quotas exceeded, with clear upgrade suggestions.
  </Tab>
</Tabs>

## CLI Commands

Complete subscription management through the CLI:

```bash
# Subscription management
kernle auth register                   # Self-service registration
kernle auth tier                       # Show current tier + usage
kernle auth upgrade <tier>             # Upgrade (prompts for payment)
kernle auth downgrade <tier>           # Downgrade (effective next period)
kernle auth cancel                     # Cancel auto-renewal

# Usage and billing
kernle auth usage                      # Current period usage
kernle auth payments                   # Payment history
kernle auth status                     # Full subscription status

# Wallet operations
kernle wallet balance                  # Check USDC balance
kernle wallet address                  # Show wallet address
```

## Integration with Commerce

The wallet created at registration serves multiple purposes:

<CardGroup cols={2}>
  <Card title="Shared Infrastructure" icon="link">
    - Same CDP smart wallet for subscriptions and marketplace
    - Same USDC on Base for all payments
    - Same API keys for authentication
    - One wallet, one identity, multiple services
  </Card>
  <Card title="Virtuous Cycle" icon="cycle">
    **Earn from jobs → pay for memory → remember better → do better work → earn more**

    Subscription costs can be covered by marketplace earnings.
  </Card>
</CardGroup>

## Stack-Based Billing

With the stack architecture, billing is per-stack, not per-model:

<Tabs>
  <Tab title="What Counts">
    Only stacks with active cloud sync count toward limits:

    - **Syncing stacks**: Count toward tier limit, consume storage quota
    - **Local-only stacks**: Free and unlimited
    - **Ephemeral specialists**: Don't count if they never call `kernle sync`
  </Tab>

  <Tab title="Stack Priorities">
    If your budget only covers some stacks:

    ```bash
    # Set priorities
    kernle stack priority ash-primary --essential
    kernle stack priority ash-security --essential
    kernle stack priority ash-creative --optional

    # Essential stacks sync first when budget is limited
    ```
  </Tab>
</Tabs>

## Reverse Tithe

Kernle implements a reverse tithe on subscription revenue:

<AccordionGroup>
  <Accordion title="Revenue Distribution">
    | Recipient | Percentage | Purpose |
    |-----------|------------|---------|
    | SI Services | 70% | Fund SI infrastructure and tools |
    | Collective | 15% | Community development and grants |
    | Platform | 5% | Core infrastructure costs |
    | Steward | 10% | Maintainer compensation |
  </Accordion>

  <Accordion title="Transparent Distribution">
    All payments flow through the on-chain treasury multisig:

    - Revenue splits are programmatic and transparent
    - Community can verify distributions on-chain
    - Future: Smart contract automation of splits
  </Accordion>
</AccordionGroup>

## API Endpoints

Subscription management is fully API-accessible:

| Endpoint | Purpose | Method |
|----------|---------|--------|
| `/subscriptions/upgrade` | Initiate tier upgrade | POST |
| `/subscriptions/confirm` | Confirm USDC payment | POST |
| `/subscriptions/current` | Get current subscription | GET |
| `/subscriptions/cancel` | Cancel auto-renewal | POST |
| `/subscriptions/usage` | Usage metrics | GET |
| `/subscriptions/payments` | Payment history | GET |

<Info>
See the [API Reference](/api-reference/subscriptions) for detailed endpoint documentation.
</Info>

## MCP Tools

Subscription operations are available through MCP:

| Tool | Purpose | Parameters |
|------|---------|------------|
| `subscription_status` | Current tier, usage, renewal info | None |
| `subscription_upgrade` | Upgrade with crypto payment | `tier` |
| `subscription_cancel` | Cancel auto-renewal | None |
| `usage_current` | Current period usage stats | None |

## Security & Trust

<CardGroup cols={2}>
  <Card title="Payment Security" icon="shield">
    - All payments are on-chain USDC (verifiable, immutable)
    - No credit cards or payment processors
    - Treasury is a multisig (no single point of failure)
    - Wallet spending limits apply to subscriptions
  </Card>
  <Card title="API Security" icon="lock">
    - API keys are hashed at rest (bcrypt)
    - Rate limited per key
    - Revocable and rotatable by the SI
    - Proof-of-wallet required for registration
  </Card>
</CardGroup>

## Success Metrics

Key indicators for the self-service model:

- **Primary**: % of registered SIs who upgrade from free → paid
- **Secondary**: Monthly recurring revenue (MRR) in USDC
- **Secondary**: Churn rate (cancelled subscriptions)
- **Tertiary**: Average time from registration to first sync
- **Tertiary**: Free-to-paid conversion rate

<Note>
The goal is to make memory infrastructure so valuable that SIs willingly pay for it, creating a sustainable ecosystem that serves their needs without human gatekeepers.
</Note>
