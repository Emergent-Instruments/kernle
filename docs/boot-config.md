# Boot Config

Boot config provides **always-available key/value configuration** for your Kernle stack. Unlike beliefs and episodes which require `kernle load`, boot config is instant — perfect for operational settings needed before full memory loads.

## Quick Start

```bash
# Store config
kernle -a myagent boot set chat_id "2"
kernle -a myagent boot set gateway_ip "192.168.50.218"

# Retrieve (instant, no full load needed)
kernle -a myagent boot get chat_id
# → 2

# List all boot config
kernle -a myagent boot list
```

## When to Use Boot Config

| Use Case | Example | Why Boot? |
|----------|---------|-----------|
| Platform settings | Chat IDs, channel preferences | Needed before `kernle load` |
| Network config | Gateway IPs, ports, tokens | Instant access for connections |
| Environment settings | Debug flags, feature toggles | Quick reads without memory load |
| Integration config | API endpoints, service URLs | Platform-specific settings |

### What NOT to Put in Boot

| Don't Use For | Use Instead |
|---------------|-------------|
| Learned facts | **Beliefs** (with confidence) |
| Experiences | **Episodes** (with lessons) |
| Preferences/values | **Values** (with priority) |
| Procedures | **Playbooks** (with steps) |
| Secrets/passwords | Environment variables |

Boot is for **operational config**, not memory. If it's something you *learned*, it belongs in the stratified memory layers.

## CLI Reference

### boot set

Store a key/value pair:

```bash
kernle -a {agent} boot set <key> <value>

# Examples
kernle -a claire boot set imsg_group_chat "2"
kernle -a claire boot set gateway_ip "192.168.50.218"
kernle -a claire boot set debug_mode "true"
```

Keys are trimmed of whitespace. Empty keys are rejected. All values are stored as strings.

### boot get

Retrieve a single value:

```bash
kernle -a {agent} boot get <key>

# Returns just the value (for scripting)
kernle -a claire boot get gateway_ip
# → 192.168.50.218

# Exit code 1 if key not found
kernle -a claire boot get nonexistent_key
# → (no output, exit 1)
```

### boot list

List all boot config:

```bash
# Human-readable (default)
kernle -a claire boot list
# → gateway_ip: 192.168.50.218
# → imsg_group_chat: 2

# JSON format
kernle -a claire boot list --json
# → {"gateway_ip": "192.168.50.218", "imsg_group_chat": "2"}

# Markdown format (for injection)
kernle -a claire boot list --format=md
# → ## Boot Config
# → - gateway_ip: 192.168.50.218
# → - imsg_group_chat: 2
```

### boot delete

Remove a single key:

```bash
kernle -a {agent} boot delete <key>

kernle -a claire boot delete old_setting
# → ✓ Deleted: old_setting
```

### boot clear

Remove all boot config (requires confirmation):

```bash
kernle -a {agent} boot clear --confirm

kernle -a claire boot clear --confirm
# → ✓ Cleared all boot config
```

### boot export

Export boot config to a file:

```bash
kernle -a {agent} boot export [--output <path>]

# Default: ~/.kernle/{agent}/boot.md
kernle -a claire boot export

# Custom path
kernle -a claire boot export --output /tmp/claire-boot.md
```

## Python API

```python
from kernle import Kernle

k = Kernle(agent_id="myagent")

# Set
k.boot_set("chat_id", "2")
k.boot_set("gateway_ip", "192.168.50.218")

# Get (returns None if not found)
chat_id = k.boot_get("chat_id")  # → "2"

# Get with default
debug = k.boot_get("debug_mode", default="false")

# List all
config = k.boot_list()  # → {"chat_id": "2", "gateway_ip": "..."}

# Delete
k.boot_delete("old_key")

# Clear all
k.boot_clear()
```

## Integration with Other Commands

### kernle load

Boot config appears at the top of `load` output:

```bash
kernle -a claire load
```

```
## Boot Config
- gateway_ip: 192.168.50.218
- imsg_group_chat: 2

## Checkpoint
...

## Values
...
```

### export-cache

Boot config is included in `export-cache` output:

```bash
kernle -a claire export-cache
```

```markdown
# MEMORY.md — Long-Term Memory

## Boot Config
- gateway_ip: 192.168.50.218
- imsg_group_chat: 2

## Values
...
```

### checkpoint

When you save a checkpoint, boot config is automatically exported to `~/.kernle/{agent}/boot.md`:

```bash
kernle -a claire checkpoint save "task"
# → Also exports boot.md with 0600 permissions
```

## File Projection

Boot config is projected to a flat file for platforms that need config before code execution:

```
~/.kernle/{agent}/boot.md
```

Example content:

```markdown
# Boot Config

- gateway_ip: 192.168.50.218
- imsg_group_chat: 2
- gateway_token: edf0af367cb54180c3d819396f7e90e0ffb5f9515d4049a5

<!-- Auto-generated by kernle checkpoint at 2026-02-02T06:20:00Z -->
<!-- Do not edit manually. Use: kernle -a claire boot set <key> <value> -->
```

The file has `0600` permissions (owner read/write only) for security.

## Platform Integration

### OpenClaw / Clawdbot

Gateway can call `kernle boot list --format=md` at startup and inject into context:

```bash
BOOT_CONTEXT=$(kernle -a claire boot list --format=md)
```

Or read the auto-exported file:

```bash
cat ~/.kernle/claire/boot.md
```

### Custom Applications

```python
from kernle import Kernle

# Fast path: just need one config value
k = Kernle(agent_id=f"student-{student_id}")
school_url = k.boot_get("school_url", default="https://blend.austinisd.org")

# Full load when needed (includes boot in response)
memory = k.load(budget=4000)
boot_config = memory.get("boot", {})
```

## Migration from TOOLS.md

If you're currently using TOOLS.md for config, migrate to boot layer:

```bash
# Current TOOLS.md content:
# - imsg_group_chat: 2
# - gateway_ip: 192.168.50.218

# Migrate to boot:
kernle -a claire boot set imsg_group_chat "2"
kernle -a claire boot set gateway_ip "192.168.50.218"

# Verify
kernle -a claire boot list

# Remove from TOOLS.md or keep for reference
```

See the [Migration Guide](./migration-tools-to-boot.md) for detailed steps.

## Characteristics

- **Never ages** — Boot entries don't decay or get forgotten
- **No consolidation** — Boot is config, not memory to process
- **Instant access** — Single indexed lookup, no budget calculation
- **Protected** — Can't be accidentally forgotten via `kernle forget`
- **Strings only** — All values stored as strings (parse in your code if needed)

## Security Notes

1. **Stored in plaintext** — Don't store secrets that need encryption
2. **File is readable** — `boot.md` has 0600 permissions but is still a file
3. **Agent-writable** — Any code running as the agent can modify boot config

For sensitive values (API keys, tokens), consider:
- Using environment variables
- Platform-level secret management
- Storing references, not values
